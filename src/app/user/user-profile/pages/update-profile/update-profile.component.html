<app-nav-bar></app-nav-bar>

<div class="container">
    <div class="row d-flex justify-content-center">
        <div class="col-md-9 mb-5">
            <div class="d-flex flex-column flex-md-row align-items-center justify-content-between">
                <div class="col-md-6 bg-light p-5 mb-5">
                    <img src="assets/Logo_ASIA_DEPOT.png" alt="Foto de Perfil" class="img-fluid rounded-circle">
                    <form (ngSubmit)="onUploadAvatar()">
                        <div class="mt-3">
                            <div class="form-group">
                                <input type="file" accept=".png, .jpg, .jpeg" id="avatar" name="avatar" (change)="onFileSelected($event)"
                                    required>
                            </div>
                            <button type="submit" class="btn btn-primary" [disabled]="uploading">Subir Foto</button>
                            <button class="btn btn-danger">Eliminar Foto</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <div class="col-md-9 mb-5">
            <div class="d-flex flex-column flex-md-row align-items-center justify-content-between">
                <div class="col-md-6 bg-light p-5 mb-5">
                    <form class="border border-2 border-dark p-5" [formGroup]="updateForm" (ngSubmit)="onSubmit()">
                        <div class="text-center mb-3">
                            <p>Regístrate con:</p>
                            <button type="button" class="btn btn-secondary btn-floating mx-1">
                                <i class="fab fa-google"></i>
                            </button>
                        </div>
                    
                        <p class="text-center">o:</p>
                    
                        <!-- Name input -->
                        <div class="form-floating mb-3">
                            <input type="text" formControlName="nombre" class="form-control" placeholder="Ingresa tu nombre">
                            <label for="registerName">Nombre</label>
                            <div *ngIf="updateForm.get('nombre')?.hasError('pattern') && updateForm.get('nombre')?.touched"
                                class="text-danger">
                                El nombre no es válido, no use carácteres especiales.
                            </div>
                        </div>
                    
                        <!-- Username input -->
                        <div class="form-floating mb-3">
                            <input type="text" formControlName="apellido" class="form-control" placeholder="Ingresa tu apellido">
                            <label for="registerUsername">Apellido</label>
                            <div *ngIf="updateForm.get('apellido')?.hasError('pattern') && updateForm.get('apellido')?.touched"
                                class="text-danger">
                                El apellido no es válido, no use carácteres especiales.
                            </div>
                        </div>
                    
                        <!-- Tel input -->
                        <div class="form-floating mb-3">
                            <input type="text" formControlName="telefono" class="form-control" placeholder="Ingresa tu número de teléfono">
                            <label for="registerTel">Teléfono</label>
                            <div *ngIf="updateForm.get('telefono')?.hasError('pattern') && updateForm.get('telefono')?.touched"
                                class="text-danger">
                                El teléfono no es válido, debe de poseer 8 dígitos.
                            </div>
                        </div>
                    
                        <!-- Nit input -->
                        <div class="form-floating mb-3">
                            <input type="number" formControlName="nit" class="form-control" placeholder="Ingresa tu NIT">
                            <label for="registerNIT">NIT</label>
                            <div *ngIf="updateForm.get('nit')?.hasError('pattern') && updateForm.get('nit')?.touched"
                                class="text-danger">
                                El NIT no es válido.
                            </div>
                        </div>
                    
                        <!-- Departamento input -->
                        <div class="form-floating mb-3">
                            <select class="form-select" aria-label="Default select example" (change)="onDepartmentSelected($event)"
                                formControlName="departamento">
                                <option value="null">Selecciona un departamento</option>
                                <option *ngFor="let department of departments" [value]="department.id">{{ department.Nombre_Departamento }}
                                </option>
                            </select>
                            <label for="registerDepartamento">Departamento</label>
                        </div>
                    
                        <!-- Municipio input -->
                        <div class="form-floating mb-3">
                            <select class="form-select" aria-label="Default select example" formControlName="municipio">
                                <option value="null">Selecciona un municipio</option>
                                <option *ngFor="let municipality of municipalities" [value]="municipality.id">{{
                                    municipality.Nombre_Municipio }}</option>
                            </select>
                            <label for="registerMunicipio">Municipio</label>
                        </div>
                    
                        <!-- Address input -->
                        <div class="form-floating mb-3">
                            <input type="text" formControlName="direccion" class="form-control" placeholder="Ingresa tu dirección general">
                            <label for="registerAddress">Dirección general</label>
                            <div *ngIf="updateForm.get('direccion')?.hasError('pattern') && updateForm.get('direccion')?.touched"
                                class="text-danger">
                                La dirección no es válida, no use carácteres especiales.
                            </div>
                            <div *ngIf="updateForm.get('direccion')?.hasError('minlength') && updateForm.get('direccion')?.touched"
                                class="text-danger">
                                La dirección es demasiado corta (mínimo 10 carácteres).
                            </div>
                            <div *ngIf="updateForm.get('direccion')?.hasError('maxlength') && updateForm.get('direccion')?.touched"
                                class="text-danger">
                                La dirección es demasiado larga (máximo 100 carácteres).
                            </div>
                        </div>
                    
                        <div class="row mb-4">
                            <div class="col-md-12 d-flex justify-content-center">
                                <!-- Submit button -->
                                <button type="submit" class="btn btn-primary btn-block w-75">Actualizar datos</button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<app-footer></app-footer>